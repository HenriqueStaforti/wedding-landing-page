---
import { getEventData } from "../data/eventData";

const { schedule } = getEventData();
const events = schedule.events ?? [];

// Extrair horário do primeiro detalhe
const extractTime = (details: string[]): string => {
  if (!details || details.length === 0) return "--:--";
  const match = details[0].match(/\d{1,2}:\d{2}/);
  return match ? match[0] : "--:--";
};
---

<section
    style="
        background-color: var(--color-primary);
        color: var(--color-secondary);
    "
>
    <div class="mx-auto w-full max-w-6xl px-4 py-24 sm:px-6 lg:px-8">
        <!-- Header -->
        <div class="max-w-4xl mb-20">
            <p
                class="text-sm uppercase tracking-[0.35em]"
                style="color: var(--color-muted);"
            >
                {schedule.eyebrow}
            </p>
            <h2
                class="mt-4 text-4xl font-semibold tracking-tight sm:text-5xl lg:text-6xl"
                style="color: var(--color-secondary);"
            >
                {schedule.title}
            </h2>
            <p
                class="mt-6 text-lg"
                style="color: var(--color-secondary); opacity: 0.8;"
            >
                {schedule.description}
            </p>
        </div>

        <!-- Timeline Vertical -->
        <div class="relative flex flex-col">
            <!-- Linha vertical -->
            <div 
                class="absolute top-0 bottom-0 w-0.5"
                style="
                    left: 1.5rem;
                    background: linear-gradient(to bottom, white, white);
                    opacity: 0.2;
                "
            ></div>

            <!-- Events Container -->
            <div class="relative flex flex-col gap-6 sm:gap-8">
                {
                    events.map((event, index) => {
                        const time = extractTime(event.details);
                        
                        return (
                            <div 
                                class="flex gap-3 sm:gap-6 pl-16 sm:pl-24 md:pl-32 items-center"
                            >
                                <!-- Ponto -->
                                <div 
                                    class="absolute flex-shrink-0"
                                    style="left: 1.5rem; transform: translateX(-50%);"
                                >
                                    <div
                                        class="w-3 h-3 rounded-full ring-2 ring-offset-2"
                                        style="
                                            background: white;
                                            ring-color: var(--color-primary);
                                        "
                                    ></div>
                                </div>

                                <!-- Horário e Título -->
                                <div class="flex flex-col gap-1 min-w-0">
                                    <div class="flex items-baseline gap-2 sm:gap-3 flex-wrap">
                                        <span
                                            class="text-base sm:text-lg font-bold uppercase tracking-[0.15em] flex-shrink-0"
                                            style="color: white;"
                                        >
                                            {time}
                                        </span>
                                        <span
                                            class="text-base uppercase tracking-[0.25em]"
                                            style="color: var(--color-secondary);"
                                        >
                                            {event.title}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        );
                    })
                }
            </div>
        </div>
    </div>
</section>

<style>
    section {
        overflow-x: hidden;
    }
</style>
